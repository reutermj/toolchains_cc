#!/bin/bash
source ${SCRIPTS_DIR}/environment

TARBALLS="/tmp/tarballs"
mkdir -p ${TARBALLS}

# ==============
# || binutils ||
# ==============
BINUTILS_VERSION="2.45"
BINUTILS_VERSION_UNDERSCORES="${BINUTILS_VERSION//./_}"
git clone --depth 1 \
    --branch "binutils-${BINUTILS_VERSION_UNDERSCORES}-branch" \
    git://sourceware.org/git/binutils-gdb.git "${BINUTILS_DIR}"

# ===================
# || linux-headers ||
# ===================
LINUX_VERSION="6.12"
git clone --depth 1 \
    --branch "v${LINUX_VERSION}" \
    https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git "${LINUX_DIR}"

# =========
# || gcc ||
# =========
GCC_VERSION="15.2.0"
GCC_VERSION_UNDERSCORES="${GCC_VERSION//./_}"
git clone --depth 1 \
    --branch "releases/gcc-${GCC_VERSION}" \
    git://gcc.gnu.org/git/gcc.git "${GCC_DIR}"

# =============
# || ncurses ||
# =============
# TODO: does ncurses even use source control?
NCURSES_TARBALL="${TARBALLS}/ncurses.tar.gz"
NCURSES_VERSION="6.5"
NCURSES_URL="https://invisible-mirror.net/archives/ncurses/ncurses-${NCURSES_VERSION}.tar.gz"
wget -O "${NCURSES_TARBALL}" "${NCURSES_URL}"
tar xvf "${NCURSES_TARBALL}" -C "${NCURSES_DIR}" --strip-components=1

# ==========
# || zlib ||
# ==========
ZLIB_VERSION="1.3.1"
git clone --depth 1 \
    --branch "v${ZLIB_VERSION}" \
    https://github.com/madler/zlib.git "${ZLIB_DIR}"

# ==========
# || zstd ||
# ==========
ZSTD_VERSION="1.5.7"
git clone --depth 1 \
    --branch "v${ZSTD_VERSION}" \
    https://github.com/facebook/zstd.git "${ZSTD_DIR}"

# =========
# || gmp ||
# =========
# TODO: gmp uses Mercurial instead of get. using wget for now
GMP_TARBALL="${TARBALLS}/gmp.tar.xz"
GMP_VERSION="6.3.0"
GMP_URL="https://gmplib.org/download/gmp/gmp-${GMP_VERSION}.tar.xz"
wget -O "${GMP_TARBALL}" "${GMP_URL}"
tar xvf "${GMP_TARBALL}" -C "${GMP_DIR}" --strip-components=1

# ==========
# || mpfr ||
# ==========
MPFR_VERSION="4.2.2"
git clone --depth 1 \
    --branch "${MPFR_VERSION}" \
    https://gitlab.inria.fr/mpfr/mpfr.git "${MPFR_DIR}"

# =========
# || mpc ||
# =========
MPC_VERSION="1.3.1"
git clone --depth 1 \
    --branch "${MPC_VERSION}" \
    https://gitlab.inria.fr/mpc/mpc.git "${MPC_DIR}"

# =========
# || isl ||
# =========
ISL_VERSION="0.27"
git clone --depth 1 \
    --branch "isl-${ISL_VERSION}" \
    https://repo.or.cz/isl.git "${ISL_DIR}"

# ===========
# || expat ||
# ===========
EXPAT_VERSION="2.7.3"
EXPAT_VERSION_UNDERSCORES="${EXPAT_VERSION//./_}"
git clone --depth 1 \
    --branch "R_${EXPAT_VERSION_UNDERSCORES}" \
    https://github.com/libexpat/libexpat.git "${EXPAT_DIR}"
