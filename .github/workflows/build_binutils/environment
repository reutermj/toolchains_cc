#!/bin/bash
set -euox pipefail

export BUILD_TOOLS="/tmp/buildtools"
export ARTIFACTS_DIR="/tmp/artifacts"
export BINUTILS_SOURCE="/tmp/binutils-source"
export ZLIB_SOURCE="/tmp/zlib-source"
export BINUTILS_ARTIFACTS="/tmp/binutils-artifacts"
export BUILD_ARCH=${TARGET%%-*}

mkdir -p "${BUILD_TOOLS}"
mkdir -p "${ARTIFACTS_DIR}"
mkdir -p "${BINUTILS_SOURCE}"
mkdir -p "${ZLIB_SOURCE}"
mkdir -p "${BINUTILS_ARTIFACTS}"

# Export to GitHub Actions environment if running in CI
if [ -n "${GITHUB_ENV:-}" ]; then
    echo "ARTIFACTS_DIR=${ARTIFACTS_DIR}" >> "${GITHUB_ENV}"
fi
